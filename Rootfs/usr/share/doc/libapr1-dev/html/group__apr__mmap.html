<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Apache Portable Runtime: MMAP (Memory Map) Routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Apache Portable Runtime
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MMAP (Memory Map) Routines<div class="ingroups"><a class="el" href="group___a_p_r.html">Apache Portability Runtime library</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac231fdf15d2d29802e0abbc5d0cf25b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#gac231fdf15d2d29802e0abbc5d0cf25b8">APR_MMAP_READ</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gac231fdf15d2d29802e0abbc5d0cf25b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2eb7f697d8bf190e630b85f967c8273"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#gac2eb7f697d8bf190e630b85f967c8273">APR_MMAP_WRITE</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gac2eb7f697d8bf190e630b85f967c8273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19d1916e7b64bfb1a969648fe7b0846a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga19d1916e7b64bfb1a969648fe7b0846a">APR_MMAP_THRESHOLD</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga19d1916e7b64bfb1a969648fe7b0846a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga548e49b3c9e8265ad8ccf70994f4fe25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga548e49b3c9e8265ad8ccf70994f4fe25">APR_MMAP_LIMIT</a>&#160;&#160;&#160;(4*1024*1024)</td></tr>
<tr class="separator:ga548e49b3c9e8265ad8ccf70994f4fe25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f469432098e986567576fd4c4ce5adc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga4f469432098e986567576fd4c4ce5adc">APR_MMAP_CANDIDATE</a>(filelength)&#160;&#160;&#160;((filelength &gt;= <a class="el" href="group__apr__mmap.html#ga19d1916e7b64bfb1a969648fe7b0846a">APR_MMAP_THRESHOLD</a>) &amp;&amp; (filelength &lt; <a class="el" href="group__apr__mmap.html#ga548e49b3c9e8265ad8ccf70994f4fe25">APR_MMAP_LIMIT</a>))</td></tr>
<tr class="separator:ga4f469432098e986567576fd4c4ce5adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga766b01a3e1e0438d06dc88d76f826f80"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structapr__mmap__t.html">apr_mmap_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga766b01a3e1e0438d06dc88d76f826f80">apr_mmap_t</a></td></tr>
<tr class="separator:ga766b01a3e1e0438d06dc88d76f826f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac6b103139be2e859741ec94cc6ad34cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#gac6b103139be2e859741ec94cc6ad34cc">apr_mmap_create</a> (<a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> **newmmap, <a class="el" href="group__apr__file__io.html#gaa46e4763ac375ea3c7a43ba6f6099e22">apr_file_t</a> *file, apr_off_t offset, apr_size_t size, apr_int32_t flag, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *cntxt)</td></tr>
<tr class="separator:gac6b103139be2e859741ec94cc6ad34cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fcdbf8090e924a4e8f2b301519bb4c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga9fcdbf8090e924a4e8f2b301519bb4c8">apr_mmap_dup</a> (<a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> **new_mmap, <a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> *old_mmap, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *p)</td></tr>
<tr class="separator:ga9fcdbf8090e924a4e8f2b301519bb4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b67a2d22a07707897cc1183a1682040"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga4b67a2d22a07707897cc1183a1682040">apr_mmap_delete</a> (<a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> *mm)</td></tr>
<tr class="separator:ga4b67a2d22a07707897cc1183a1682040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c1d31bd9e911744bd5edb97e17210ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__mmap.html#ga4c1d31bd9e911744bd5edb97e17210ec">apr_mmap_offset</a> (void **addr, <a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> *mm, apr_off_t offset)</td></tr>
<tr class="separator:ga4c1d31bd9e911744bd5edb97e17210ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga4f469432098e986567576fd4c4ce5adc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_MMAP_CANDIDATE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">filelength</td><td>)</td>
          <td>&#160;&#160;&#160;((filelength &gt;= <a class="el" href="group__apr__mmap.html#ga19d1916e7b64bfb1a969648fe7b0846a">APR_MMAP_THRESHOLD</a>) &amp;&amp; (filelength &lt; <a class="el" href="group__apr__mmap.html#ga548e49b3c9e8265ad8ccf70994f4fe25">APR_MMAP_LIMIT</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Can this file be MMaped </p>

</div>
</div>
<a class="anchor" id="ga548e49b3c9e8265ad8ccf70994f4fe25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_MMAP_LIMIT&#160;&#160;&#160;(4*1024*1024)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum size of MMap region </p>

</div>
</div>
<a class="anchor" id="gac231fdf15d2d29802e0abbc5d0cf25b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_MMAP_READ&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MMap opened for reading </p>

</div>
</div>
<a class="anchor" id="ga19d1916e7b64bfb1a969648fe7b0846a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_MMAP_THRESHOLD&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Files have to be at least this big before they're mmap()d. This is to deal with systems where the expense of doing an mmap() and an munmap() outweighs the benefit for small files. It shouldn't be set lower than 1. </p>

</div>
</div>
<a class="anchor" id="gac2eb7f697d8bf190e630b85f967c8273"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_MMAP_WRITE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MMap opened for writing </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga766b01a3e1e0438d06dc88d76f826f80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> <a class="el" href="structapr__mmap__t.html">apr_mmap_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac6b103139be2e859741ec94cc6ad34cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_mmap_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> **&#160;</td>
          <td class="paramname"><em>newmmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__file__io.html#gaa46e4763ac375ea3c7a43ba6f6099e22">apr_file_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_int32_t&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&#160;</td>
          <td class="paramname"><em>cntxt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new mmap'ed file out of an existing APR file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newmmap</td><td>The newly created mmap'ed file. </td></tr>
    <tr><td class="paramname">file</td><td>The file to turn into an mmap. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset into the file to start the data pointer at. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the file </td></tr>
    <tr><td class="paramname">flag</td><td>bit-wise or of: <pre>
         APR_MMAP_READ       MMap opened for reading
         APR_MMAP_WRITE      MMap opened for writing
</pre> </td></tr>
    <tr><td class="paramname">cntxt</td><td>The pool to use when creating the mmap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4b67a2d22a07707897cc1183a1682040"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_mmap_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> *&#160;</td>
          <td class="paramname"><em>mm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a mmap'ed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mm</td><td>The mmap'ed file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9fcdbf8090e924a4e8f2b301519bb4c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_mmap_dup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> **&#160;</td>
          <td class="paramname"><em>new_mmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> *&#160;</td>
          <td class="paramname"><em>old_mmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Duplicate the specified MMAP. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_mmap</td><td>The structure to duplicate into. </td></tr>
    <tr><td class="paramname">old_mmap</td><td>The mmap to duplicate. </td></tr>
    <tr><td class="paramname">p</td><td>The pool to use for new_mmap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4c1d31bd9e911744bd5edb97e17210ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_mmap_offset </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapr__mmap__t.html">apr_mmap_t</a> *&#160;</td>
          <td class="paramname"><em>mm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_off_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move the pointer into the mmap'ed file to the specified offset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The pointer to the offset specified. </td></tr>
    <tr><td class="paramname">mm</td><td>The mmap'ed file. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset to move to. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 30 2013 23:12:12 for Apache Portable Runtime by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
